
<!-- README.md is generated from README.Rmd. Please edit that file -->

# `{plumberizer}`

## Installation

Install the development version from
[GitHub](https://github.com/jcrodriguez1989/plumberizer) with:

``` r
# install.packages("remotes")
remotes::install_github("jcrodriguez1989/plumberizer")
```

## Usage

`{plumberizer}`â€™s main function is `plumberize`, call it with the
package that you need to generate a Plumber API configuration file, and
it will build it for you:

``` r
plumberizer::plumberize("chatgpt")
```

    #> ! Plumberizing ask_chatgpt
    #> ! Plumberizing comment_code
    #> ! Plumberizing complete_code
    #> ! Plumberizing create_unit_tests
    #> ! Plumberizing create_variable_name
    #> ! Plumberizing document_code
    #> ! Plumberizing explain_code
    #> ! Plumberizing find_issues_in_code
    #> ! Plumberizing generate_image
    #> ! Plumberizing list_models
    #> ! Plumberizing optimize_code
    #> ! Plumberizing refactor_code
    #> ! Plumberizing reset_chat_session
    library("plumber")

    #* @apiTitle chatgpt
    #* @apiDescription RESTful API for chatgpt generated by the plumberizer package.
    #* @apiVersion 0.0.1

    #* Ask ChatGPT
    #* 
    #* Note: See also `reset_chat_session`.
    #* Returns: A character value with the response generated by ChatGPT.
    #* @param question The question to ask ChatGPT.
    #* @param session_id The ID of the session to be used. We can have different conversations by using different session IDs.
    #* @param openai_api_key OpenAI's API key.
    #* @param images A list of images to attach to the question. It could be a list of URLs or paths.
    #* @get /ask_chatgpt
    #* @tag Endpoints
    function(question, session_id = "1", openai_api_key = Sys.getenv("OPENAI_API_KEY"), images = NULL) {
      ask_chatgpt(question, session_id, openai_api_key, images)
    }

    #* ChatGPT: Comment Code
    #* 
    #* ChatGPT: Comment Code
    #* Returns: A character value with the response generated by ChatGPT.
    #* @param code The code to be commented by ChatGPT. If not provided, it will use what's copied on the clipboard.
    #* @get /comment_code
    #* @tag Endpoints
    function(code = clipr::read_clip(allow_non_interactive = TRUE)) {
      comment_code(code)
    }

    #* ChatGPT: Complete Code
    #* 
    #* ChatGPT: Complete Code
    #* Returns: A character value with the response generated by ChatGPT.
    #* @param code The code to be completed by ChatGPT. If not provided, it will use what's copied on the clipboard.
    #* @get /complete_code
    #* @tag Endpoints
    function(code = clipr::read_clip(allow_non_interactive = TRUE)) {
      complete_code(code)
    }

    #* ChatGPT: Create Unit Tests
    #* 
    #* Create `
    #* list("testthat")
    #* ` test cases for the code.
    #* Returns: A character value with the response generated by ChatGPT.
    #* @param code The code for which to create unit tests by ChatGPT. If not provided, it will use what's copied on the clipboard.
    #* @get /create_unit_tests
    #* @tag Endpoints
    function(code = clipr::read_clip(allow_non_interactive = TRUE)) {
      create_unit_tests(code)
    }

    #* ChatGPT: Create Variable Name
    #* 
    #* ChatGPT: Create Variable Name
    #* Returns: A character value with the response generated by ChatGPT.
    #* @param code The code for which to give a variable name to its result. If not provided, it will use what's copied on the clipboard.
    #* @get /create_variable_name
    #* @tag Endpoints
    function(code = clipr::read_clip(allow_non_interactive = TRUE)) {
      create_variable_name(code)
    }

    #* ChatGPT: Document Code (in roxygen2 format)
    #* 
    #* ChatGPT: Document Code (in roxygen2 format)
    #* Returns: A character value with the response generated by ChatGPT.
    #* @param code The code to be documented by ChatGPT. If not provided, it will use what's copied on the clipboard.
    #* @get /document_code
    #* @tag Endpoints
    function(code = clipr::read_clip(allow_non_interactive = TRUE)) {
      document_code(code)
    }

    #* ChatGPT: Explain Code
    #* 
    #* ChatGPT: Explain Code
    #* Returns: A character value with the response generated by ChatGPT.
    #* @param code The code to be explained by ChatGPT. If not provided, it will use what's copied on the clipboard.
    #* @get /explain_code
    #* @tag Endpoints
    function(code = clipr::read_clip(allow_non_interactive = TRUE)) {
      explain_code(code)
    }

    #* ChatGPT: Find Issues in Code
    #* 
    #* ChatGPT: Find Issues in Code
    #* Returns: A character value with the response generated by ChatGPT.
    #* @param code The code to be analyzed by ChatGPT. If not provided, it will use what's copied on the clipboard.
    #* @get /find_issues_in_code
    #* @tag Endpoints
    function(code = clipr::read_clip(allow_non_interactive = TRUE)) {
      find_issues_in_code(code)
    }

    #* Generate an Image With DALL-E 3
    #* 
    #* Generate an Image With DALL-E 3
    #* @param prompt The prompt for image generation.
    #* @param out_file The path where to save the generated image.
    #* @param openai_api_key OpenAI's API key.
    #* @get /generate_image
    #* @tag Endpoints
    function(prompt, out_file = tempfile(fileext = ".png"), openai_api_key = Sys.getenv("OPENAI_API_KEY")) {
      generate_image(prompt, out_file, openai_api_key)
    }

    #* ChatGPT: List Models
    #* 
    #* ChatGPT: List Models
    #* Returns: A data.frame with the available models to be used by OpenAI's API.
    #* @param openai_api_key OpenAI's API key.
    #* @get /list_models
    #* @tag Endpoints
    function(openai_api_key = Sys.getenv("OPENAI_API_KEY")) {
      list_models(openai_api_key)
    }

    #* ChatGPT: Optimize Code
    #* 
    #* ChatGPT: Optimize Code
    #* Returns: A character value with the response generated by ChatGPT.
    #* @param code The code to be optimized by ChatGPT. If not provided, it will use what's copied on the clipboard.
    #* @get /optimize_code
    #* @tag Endpoints
    function(code = clipr::read_clip(allow_non_interactive = TRUE)) {
      optimize_code(code)
    }

    #* ChatGPT: Refactor Code
    #* 
    #* ChatGPT: Refactor Code
    #* Returns: A character value with the response generated by ChatGPT.
    #* @param code The code to be refactored by ChatGPT. If not provided, it will use what's copied on the clipboard.
    #* @get /refactor_code
    #* @tag Endpoints
    function(code = clipr::read_clip(allow_non_interactive = TRUE)) {
      refactor_code(code)
    }

    #* Reset Chat Session
    #* 
    #* This function is intended to be used with `ask_chatgpt`. If we are using `ask_chatgpt` to chat with ChatGPT, and
    #* we want to start a new conversation, we must call `reset_chat_session`.
    #* @param system_role ChatGPT's role as an AI assistant.
    #* @param session_id The ID of the session to be used. If `NULL`, this function will have no effect.
    #* @get /reset_chat_session
    #* @tag Endpoints
    function(system_role = "You are a helpful assistant.", session_id = "1") {
      reset_chat_session(system_role, session_id)
    }
